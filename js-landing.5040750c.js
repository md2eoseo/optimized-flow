parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"iU7q":[function(require,module,exports) {
"use strict";var e="https://todoweb-a2c8.restdb.io/rest/client",t="5e9e0988436377171a0c266d";function n(e){e.target.value=e.target.value,e.target.classList.remove("invalid"),e.target.checkValidity()?e.target.parentNode.querySelector("p").classList.add("hidden"):(e.target.classList.add("invalid"),e.target.parentNode.querySelector("p").classList.remove("hidden"))}function o(e){e.preventDefault(),c(e.target)}function c(e){var t=e.elements,n=t.full_name,o=t.work_email,c=t.job_title,i=t.country,l=t.company,r=t.agree,s=e.querySelector("#full_name_p"),d=e.querySelector("#work_email_p"),u=e.querySelector("#job_title_p"),m=e.querySelector("#agree_p");if(n.value=n.value.trim(),o.value=o.value.trim(),c.value=c.value.trim(),l.value=l.value.trim(),document.querySelectorAll("input, select").forEach(function(e){e.classList.remove("invalid")}),e.checkValidity())return a({full_name:n.value,work_email:o.value,job_title:c.value,country:i.value,company:l.value}),console.log("submitted "+o.value.trim()),!0;c.checkValidity()?u.classList.add("hidden"):(c.classList.add("invalid"),u.classList.remove("hidden"),c.focus()),o.checkValidity()?d.classList.add("hidden"):(o.classList.add("invalid"),d.classList.remove("hidden"),o.focus()),n.checkValidity()?s.classList.add("hidden"):(n.classList.add("invalid"),s.classList.remove("hidden"),n.focus()),r.checkValidity()?m.classList.add("hidden"):(r.classList.add("invalid"),m.classList.remove("hidden"),r.focus()),console.error("Validation False!")}function a(n){fetch("".concat(e,'?q={"work_email": "').concat(n.work_email,'"}'),{method:"get",headers:{"Content-Type":"application/json; charset=utf-8","x-apikey":t,"cache-control":"no-cache"}}).then(function(e){return e.json()}).then(function(e){e.length?(n.$inc={cnt:1},i(n,e[0]._id)):(n.cnt=1,l(n))})}function i(n,o){var c=JSON.stringify(n);fetch("".concat(e,"/").concat(o),{method:"put",headers:{"Content-Type":"application/json; charset=utf-8","x-apikey":t,"cache-control":"no-cache"},body:c}).then(function(e){return e.json()}).then(function(){console.log("already ".concat(n.work_email," existsd!")),localStorage.setItem("isClientSubmitted",[JSON.stringify(n)])}).then(function(){return window.location="asset.html"}).catch(function(e){console.error("PUT ERROR: ".concat(e))})}function l(n){var o=JSON.stringify(n);fetch(e,{method:"post",headers:{"Content-Type":"application/json; charset=utf-8","x-apikey":t,"cache-control":"no-cache"},body:o}).then(function(e){return e.json()}).then(function(){console.log("inserted ".concat(o," into client list!")),localStorage.setItem("isClientSubmitted",[JSON.stringify(n)])}).then(function(){return window.location="asset.html"}).catch(function(e){console.error("POST ERROR: ".concat(e))})}function r(){var e=JSON.parse(localStorage.getItem("isClientSubmitted"));null!=e?(document.querySelector("#tagline3").textContent="Welcome back, ".concat(e.full_name,"!"),document.querySelector("#subs-btn").textContent="To the Asset",document.querySelector("#subs-btn").addEventListener("click",function(){return window.location="asset.html"})):document.querySelector("#subs-btn").addEventListener("click",function(){window.location="#form",document.querySelector(".form form").elements.full_name.focus()})}window.addEventListener("load",function(){var e=document.querySelector(".form form");e.setAttribute("novalidate",!0),e.querySelectorAll("[required]").forEach(function(e){return e.addEventListener("input",n)}),e.addEventListener("submit",o),r()});
},{}]},{},["iU7q"], null)
//# sourceMappingURL=js-landing.5040750c.js.map